(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},a={app:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"00f7":function(e,t,s){"use strict";s("caef")},"0967":function(e,t,s){"use strict";s("ba9d")},"0daa":function(e,t,s){"use strict";s("7bc4")},"0e7a":function(e,t,s){"use strict";s("b009")},"2ad7":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],r={name:"App"},o=r,l=(s("0967"),s("2877")),c=Object(l["a"])(o,a,n,!1,null,null,null),u=c.exports,d=s("8c4f"),h=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:"叮咚的工具箱",hideBackButton:!0}},[t("div",{staticClass:"home-content"},[t("div",{staticClass:"welcome-section"},[t("h2",[e._v("欢迎使用叮咚的工具箱")]),t("p",[e._v("这里提供了一些实用的开发工具，希望能帮助您提高工作效率")])]),t("div",{staticClass:"tools-grid"},e._l(e.toolList,(function(s){return t("router-link",{key:s.id,staticClass:"tool-card",attrs:{to:e.getToolLink(s)}},[t("div",{staticClass:"tool-icon"},[t("i",{class:s.icon})]),t("div",{staticClass:"tool-info"},[t("h3",{staticClass:"tool-title"},[e._v(" "+e._s(s.title)+" "),"external"===s.type?t("i",{staticClass:"el-icon-link external-indicator"}):e._e()]),t("p",{staticClass:"tool-description"},[e._v(e._s(s.description))])])])})),1),t("div",{staticClass:"footer-section"},[t("p",[e._v("Copyright © 2025 叮咚的工具箱")])])])])},m=[],k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-layout"},[t("div",{staticClass:"header"},[t("div",{staticClass:"header-content"},[t("h1",{staticClass:"page-title"},[e._v(e._s(e.title))]),e.hideBackButton?e._e():t("router-link",{staticClass:"back-button",attrs:{to:"/"}},[t("el-button",{attrs:{type:"text"}},[t("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回首页 ")])],1)],1)]),t("div",{staticClass:"content",class:{"content-full-width":e.fullWidth}},[e._t("default")],2)])},p=[],f={name:"PageLayout",props:{title:{type:String,required:!0},hideBackButton:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}}},g=f,w=(s("89ea"),Object(l["a"])(g,k,p,!1,null,"318b38c5",null)),y=w.exports,v={name:"Home",components:{PageLayout:y},data(){return{toolList:[{id:1,type:"internal",route:"/sql-format",title:"SQL字段转换",description:"将SQL字段定义转换为TypeScript接口",icon:"el-icon-document-copy"},{id:2,type:"internal",route:"/plate-generator",title:"车牌号生成器",description:"快速生成车牌号图片",icon:"el-icon-truck"},{id:3,type:"internal",route:"/work-time-schedule",title:"工时排布统计",description:"记录和管理每周工时安排",icon:"el-icon-time"},{id:4,type:"internal",route:"/sudoku",title:"数独游戏",description:"经典数独游戏，锻炼逻辑思维",icon:"el-icon-s-grid"},{id:5,type:"external",url:"https://sunzsh.github.io/json/",title:"JSON格式化",description:"在线JSON格式化工具",icon:"el-icon-document"},{id:6,type:"external",url:"https://tool.lu",title:"在线工具集",description:"程序员在线工具集合",icon:"el-icon-folder"},{id:7,type:"external",url:"https://www.bejson.com",title:"BeJSON工具",description:"JSON在线解析及格式化验证",icon:"el-icon-edit-outline"},{id:8,type:"external",url:"https://www.json.cn",title:"JSON格式化",description:"在线JSON格式化工具",icon:"el-icon-document"}]}},methods:{getToolLink(e){if("external"===e.type){const t=encodeURIComponent(e.url),s=encodeURIComponent(e.title),i=encodeURIComponent(e.description||"");return`/web-embed/${t}/${s}/${i}`}return e.route}}},C=v,b=(s("6941"),Object(l["a"])(C,h,m,!1,null,"21055f2f",null)),D=b.exports,W=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:"SQL字段转换"}},[t("el-row",{staticClass:"sql-format-content",attrs:{gutter:32}},[t("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t("el-card",{staticClass:"input-section",attrs:{shadow:"hover"}},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"card-title"},[t("i",{staticClass:"el-icon-edit"}),e._v(" 输入SQL字段定义 ")])]),t("el-input",{staticClass:"sql-input",attrs:{type:"textarea",rows:15,placeholder:"请输入SQL字段定义...",resize:"none"},model:{value:e.sqlInput,callback:function(t){e.sqlInput=t},expression:"sqlInput"}}),t("div",{staticClass:"button-group"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.convertSql}},[e._v(" 转换 ")]),t("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearAll}},[e._v(" 清空 ")]),t("el-button",{attrs:{icon:"el-icon-document"},on:{click:e.loadTestData}},[e._v(" 测试数据 ")])],1)],1)],1),t("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t("el-card",{staticClass:"output-section",attrs:{shadow:"hover"}},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",{staticClass:"card-title"},[t("i",{staticClass:"el-icon-document"}),e._v(" 转换结果 ")])]),t("el-input",{staticClass:"sql-output",attrs:{type:"textarea",rows:15,placeholder:"转换结果将显示在这里...",readonly:"",resize:"none"},model:{value:e.showSql,callback:function(t){e.showSql=t},expression:"showSql"}}),t("div",{staticClass:"button-group"},[t("el-button",{attrs:{type:"success",icon:"el-icon-document-copy"},on:{click:e.copyResult}},[e._v(" 复制结果 ")])],1)],1)],1)],1)],1)},T=[],_={name:"SqlFormat",components:{PageLayout:y},data(){return{sqlInput:"",showSql:""}},methods:{convertSql(){if(this.sqlInput.trim())try{const e=this.parseSqlFields(this.sqlInput);this.showSql=e.join("\n"),this.$message.success("转换完成！")}catch(e){this.$message.error("转换失败，请检查输入格式"),console.error("转换错误:",e)}else this.$message.warning("请输入SQL字段定义")},parseSqlFields(e){const t=e.trim(),s=this.splitFieldDefinitions(t);return s.filter(e=>e.trim()).map(e=>this.parseSingleField(e)).filter(e=>e)},splitFieldDefinitions(e){const t=e.replace(/,\s*$/,""),s=[];let i="",a=!1,n="";for(let r=0;r<t.length;r++){const e=t[r];"'"!==e&&'"'!==e||0!==r&&"\\"===t[r-1]||(a?e===n&&(a=!1):(a=!0,n=e)),","!==e||a?i+=e:(s.push(i.trim()),i="")}return i.trim()&&s.push(i.trim()),s},parseSingleField(e){try{const t=e.match(/`([^`]+)`/);if(!t)return console.warn("无法解析字段名:",e),null;const s=t[1],i=this.strToCam(s),a=e.match(/`\s*(\w+)/i),n=a?a[1].toLowerCase():"",r=["bigint","int","tinyint","smallint","mediumint","decimal","float","double"],o=r.includes(n)?"number":"string",l=e.includes("NOT NULL"),c=e.match(/DEFAULT\s+['"`]?([^'"`,\s]+)['"`]?/i),u=c?c[1]:null,d=e.match(/COMMENT\s+['"`]([^'"`]+)['"`]/i),h=d?d[1]:"",m=[];h&&m.push(h),l&&m.push("【必填】"),null!==u&&m.push(`【默认为：${u}】`);const k=m.length>0?"  // "+m.join(" "):"",p=l?"":"?";return`${i}${p}: ${o};${k}`}catch(t){return console.warn("解析字段失败:",e,t),null}},strToCam(e){return e&&"string"===typeof e?e.toLowerCase().split("_").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1)).join(""):""},copyResult(){this.showSql.trim()?navigator.clipboard.writeText(this.showSql).then(()=>{this.$message.success("复制成功！")}).catch(()=>{const e=document.createElement("textarea");e.value=this.showSql,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.$message.success("复制成功！")}):this.$message.warning("没有可复制的内容")},clearAll(){this.sqlInput="",this.showSql=""},loadTestData(){this.sqlInput="\n        `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',\n        `company_id` bigint(20) NOT NULL COMMENT '客户公司编码',\n        `bill_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '单据号',\n        `contract_status` tinyint(4) NOT NULL DEFAULT '10' COMMENT '合同状态(10=正常 20=已过期 30=提前中止)',\n        `display_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '显示品牌/品类控制字段(0=品牌 1=品类)',\n        `supplier_no` varchar(20) NOT NULL COMMENT '供应商编号',\n        `stock_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '库存数量',\n        `before_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '调整前数量',\n        `adjustment_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '调整数量',\n        `settlement_method` tinyint(4) NOT NULL COMMENT '结算方式 1=半月结 2=月结 3=季结 ',\n        `currency` tinyint(4) NOT NULL COMMENT '币种(1=人民币 2=港币 3=美元)',\n        `effective_date` date NOT NULL COMMENT '生效日期',\n        `status` varchar(20) NOT NULL DEFAULT '10' COMMENT '状态(10=正常 20=审核)',\n        `remarks` varchar(100) DEFAULT NULL COMMENT '备注',\n        `creator` varchar(20) NOT NULL COMMENT '创建人',\n        `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间(不可人为调整)',\n        `modifier` varchar(20) DEFAULT NULL COMMENT '修改人',\n        `modify_time` datetime DEFAULT NULL COMMENT '修改时间',\n        `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n        `del_tag` varchar(2) DEFAULT '0' COMMENT '归档删除标识(0=正常归档，删除后数据同步下游 1=归档删除，删除后数据不同步下游',\n        `partion_no` varchar(20) NOT NULL COMMENT '分库特征码',\n      ",this.showSql=""}}},x=_,N=(s("0daa"),Object(l["a"])(x,W,T,!1,null,"257fd45f",null)),S=N.exports,I=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:"车牌号图片生成器"}},[t("div",{staticClass:"plate-generator-content"},[t("el-card",{staticClass:"input-section",attrs:{shadow:"hover"}},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("i",{staticClass:"el-icon-edit"}),t("span",[e._v("输入车牌号")])]),t("el-form",{attrs:{model:e.formData,"label-width":"100px",size:"medium"}},[t("el-form-item",{attrs:{label:"车牌号码"}},[t("el-input",{attrs:{placeholder:"请输入车牌号，如：京A12345",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.generatePlate.apply(null,arguments)}},model:{value:e.plateNumber,callback:function(t){e.plateNumber=t},expression:"plateNumber"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-picture",disabled:!e.plateNumber.trim()},on:{click:e.generatePlate}},[e._v(" 生成图片 ")])],1)],1)],1),t("el-card",{staticClass:"preview-section",attrs:{shadow:"hover"}},[t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("i",{staticClass:"el-icon-view"}),t("span",[e._v("车牌预览")])]),t("div",{staticClass:"canvas-container"},[t("canvas",{ref:"plateCanvas",attrs:{width:"320",height:"80"}}),t("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-download",disabled:!e.plateNumber.trim()},on:{click:e.downloadPlate}},[e._v(" 下载PNG图片 ")])],1)])],1)])},$=[],L={name:"PlateGenerator",components:{PageLayout:y},data(){return{plateNumber:"京A12345",formData:{plateNumber:""}}},mounted(){this.generatePlate()},methods:{generatePlate(){const e=this.$refs.plateCanvas,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#1976d2",t.fillRect(0,0,e.width,e.height),t.strokeStyle="#fff",t.lineWidth=2;const s=10,i=5,a=i,n=i,r=e.width-2*i,o=e.height-2*i;t.beginPath(),t.moveTo(a+s,n),t.lineTo(a+r-s,n),t.quadraticCurveTo(a+r,n,a+r,n+s),t.lineTo(a+r,n+o-s),t.quadraticCurveTo(a+r,n+o,a+r-s,n+o),t.lineTo(a+s,n+o),t.quadraticCurveTo(a,n+o,a,n+o-s),t.lineTo(a,n+s),t.quadraticCurveTo(a,n,a+s,n),t.closePath(),t.stroke(),t.beginPath(),t.arc(120,e.height/2,4,0,2*Math.PI),t.fillStyle="#fff",t.fill(),t.textAlign="left",t.textBaseline="middle";const l=this.plateNumber||"京A12345",c=l.slice(0,1),u=l.slice(1,2),d=l.slice(2);t.font='bold 36px "Arial Narrow", "Microsoft YaHei", "黑体", Arial, sans-serif',t.fillStyle="#000000",t.fillText(c,21.5,e.height/2+4+1.5),t.fillStyle="#E0E0E0",t.fillText(c,19.5,e.height/2+4-.5),t.fillStyle="#fff",t.fillText(c,20,e.height/2+4),t.font='bold 40px "Arial Narrow", "Microsoft YaHei", "黑体", Arial, sans-serif',t.fillStyle="#000000",t.fillText(u,66.5,e.height/2+4+1.5),t.fillStyle="#E0E0E0",t.fillText(u,64.5,e.height/2+4-.5),t.fillStyle="#fff",t.fillText(u,65,e.height/2+4);let h=140,m=30;(5===d.length||6===d.length)&&(m=30);for(let k=0;k<d.length;k++)t.fillStyle="#000000",t.fillText(d[k],h+1.5,e.height/2+4+1.5),t.fillStyle="#E0E0E0",t.fillText(d[k],h-.5,e.height/2+4-.5),t.fillStyle="#fff",t.fillText(d[k],h,e.height/2+4),h+=m},downloadPlate(){const e=this.$refs.plateCanvas,t=document.createElement("a");t.download=`车牌号_${this.plateNumber||"京A88888"}.png`,t.href=e.toDataURL(),t.click()}},watch:{plateNumber(){this.$nextTick(()=>{this.generatePlate()})}}},O=L,R=(s("00f7"),Object(l["a"])(O,I,$,!1,null,"3566b994",null)),E=R.exports,M=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:e.pageTitle,showBackButton:!0}},[t("div",{staticClass:"web-embed-container"},[t("div",{staticClass:"embed-header"},[t("div",{staticClass:"header-content"},[t("h2",[e._v(e._s(e.pageTitle))]),e.description?t("p",[e._v(e._s(e.description))]):e._e()]),t("div",{staticClass:"header-actions"},[t("a",{staticClass:"external-link",attrs:{href:e.url,target:"_blank"}},[t("i",{staticClass:"el-icon-link"}),e._v(" 在新窗口中打开 ")]),t("a",{staticClass:"external-link",on:{click:e.openFullscreen}},[t("i",{staticClass:"el-icon-full-screen"}),e._v(" 放大网页 ")])])]),t("div",{staticClass:"iframe-container",class:{"fullscreen-mode":e.showFullscreen}},[t("iframe",{staticClass:"embedded-iframe",class:{"fullscreen-iframe":e.showFullscreen},attrs:{src:e.url,title:e.pageTitle,frameborder:"0",allowfullscreen:""}}),e.showFullscreen?t("button",{staticClass:"floating-close-btn",on:{click:e.closeFullscreen}},[t("i",{staticClass:"el-icon-close"})]):e._e()])])])},H=[],F={name:"WebEmbed",components:{PageLayout:y},data(){return{url:"",pageTitle:"",description:"",showFullscreen:!1}},created(){const{url:e,title:t,desc:s}=this.$route.params;this.url=decodeURIComponent(e||""),this.pageTitle=decodeURIComponent(t||"外部网站"),this.description=decodeURIComponent(s||"")},mounted(){if(!this.url||!this.isValidUrl(this.url))return this.$message.error("无效的URL地址"),void this.$router.push("/")},beforeDestroy(){document.body.classList.remove("fullscreen-active"),document.documentElement.classList.remove("fullscreen-active")},methods:{isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}},openFullscreen(){this.showFullscreen=!0,document.body.classList.add("fullscreen-active"),document.documentElement.classList.add("fullscreen-active")},closeFullscreen(){this.showFullscreen=!1,requestAnimationFrame(()=>{document.body.classList.remove("fullscreen-active"),document.documentElement.classList.remove("fullscreen-active")})}}},A=F,P=(s("0e7a"),Object(l["a"])(A,M,H,!1,null,"8d844f9a",null)),q=P.exports,U=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:"工时排布统计",fullWidth:!0}},[t("div",{staticClass:"work-time-content"},[t("WeekNavigation",{attrs:{currentWeekNumber:e.currentWeekNumber,isCurrentWeek:e.isCurrentWeek,weekRange:e.weekRange,weekTotalHours:e.weekTotalHours,weekTargetHours:e.weekTargetHours,weekRemainingHours:e.weekRemainingHours},on:{"previous-week":e.previousWeek,"next-week":e.nextWeek,"go-to-current-week":e.goToCurrentWeek,"generate-week-report":e.generateWeekReport}}),t("WeekGrid",{attrs:{weekDays:e.weekDays,isToday:e.isToday,isWeekend:e.isWeekend,isWorkdayOnWeekend:e.isWorkdayOnWeekend,getHolidayName:e.getHolidayName,getTotalHours:e.getTotalHours,getRemainingHours:e.getRemainingHours},on:{"add-work-item":e.showAddDialog,"edit-work-item":e.editWorkItem,"delete-work-item":e.deleteWorkItem,"open-link":e.openLink}}),t("WorkItemDialog",{ref:"workItemDialog",attrs:{visible:e.dialogVisible,isEditing:e.isEditing,newItem:e.newItem,rules:e.rules},on:{close:e.handleDialogClose,save:function(t){e.isEditing?e.updateWorkItem():e.addWorkItem()},"set-quick-hours":e.setQuickHours,"parse-link":e.parseLink}}),e.getDataStats().totalWeeks>0?t("DataDistribution",{attrs:{distributionExpanded:e.distributionExpanded,dataStats:e.getDataStats(),currentWeekKey:e.getWeekKey(),getWeekDateRange:e.getWeekDateRange,getWeekTotalHours:e.getWeekTotalHours,getWeekRemainingHours:e.getWeekRemainingHours,getWeekTargetHours:e.getWeekTargetHours,getWeekDays:e.getWeekDays,hasWorkOnDay:e.hasWorkOnDay,formatDayDate:e.formatDayDate,getWeekNumber:e.getWeekNumber},on:{"toggle-distribution":e.toggleDistribution,"clear-all-data":e.clearAllData,"go-to-week":e.goToWeek,"delete-week":e.deleteWeek}}):e._e(),t("el-dialog",{attrs:{title:"本周周报",visible:e.weekReportDialogVisible,width:"600px","before-close":e.handleWeekReportClose},on:{"update:visible":function(t){e.weekReportDialogVisible=t}}},[t("div",{staticClass:"week-report-content"},[t("el-input",{staticClass:"week-report-textarea",attrs:{type:"textarea",rows:15,placeholder:"本周事项列表"},model:{value:e.weekReportContent,callback:function(t){e.weekReportContent=t},expression:"weekReportContent"}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleWeekReportClose}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:e.copyWeekReport}},[e._v("复制")])],1)])],1)])},j=[],B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"week-nav"},[t("div",{staticClass:"nav-btn",on:{click:function(t){return e.$emit("previous-week")}}},[t("el-button",{attrs:{type:"text",icon:"el-icon-arrow-left"}},[e._v("上一周")])],1),t("div",{staticClass:"week-display"},[t("div",{staticClass:"week-title",on:{click:function(t){return e.$emit("go-to-current-week")}}},[t("span",{staticClass:"title"},[e._v("第"+e._s(e.currentWeekNumber)+"周")]),e.isCurrentWeek?e._e():t("i",{staticClass:"el-icon-refresh current-icon",attrs:{title:"回到本周"}})]),t("div",{staticClass:"week-stats"},[t("span",{staticClass:"date-range"},[e._v(e._s(e.weekRange))]),t("div",{staticClass:"hours-summary"},[t("span",{staticClass:"total"},[e._v(e._s(e.weekTotalHours)+"h")]),t("span",{staticClass:"separator"},[e._v("/")]),t("span",{staticClass:"target"},[e._v(e._s(e.weekTargetHours)+"h")]),parseFloat(e.weekRemainingHours)>0?t("span",{staticClass:"remaining"},[e._v("(还差"+e._s(e.weekRemainingHours)+"h)")]):e._e(),t("el-button",{staticClass:"report-btn-inline",attrs:{type:"primary",size:"mini",icon:"el-icon-document"},on:{click:function(t){return e.$emit("generate-week-report")}}},[e._v("生成本周周报")])],1)])]),t("div",{staticClass:"nav-btn",on:{click:function(t){return e.$emit("next-week")}}},[t("el-button",{attrs:{type:"text",icon:"el-icon-arrow-right"}},[e._v("下一周")])],1)])},V=[],z={name:"WeekNavigation",props:{currentWeekNumber:{type:[String,Number],default:""},isCurrentWeek:{type:Boolean,default:!1},weekRange:{type:String,default:""},weekTotalHours:{type:[String,Number],default:0},weekTargetHours:{type:[String,Number],default:0},weekRemainingHours:{type:[String,Number],default:0}},emits:["previous-week","next-week","go-to-current-week","generate-week-report"]},J=z,Y=(s("fc7c"),Object(l["a"])(J,B,V,!1,null,"c43f8700",null)),K=Y.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"week-grid"},e._l(e.weekDays,(function(s){return t("div",{key:s.date,staticClass:"day-col"},[t("div",{staticClass:"day-header",class:{today:e.isToday(s.date),weekend:e.isWeekend(s.name,s.date),"workday-weekend":e.isWorkdayOnWeekend(s.name,s.date)}},[t("div",{staticClass:"header-top"},[t("div",{staticClass:"day-name"},[e._v(" "+e._s(s.name)+" "),e.isWeekend(s.name,s.date)?t("span",{staticClass:"weekend-badge"},[e._v(" "+e._s(e.getHolidayName(s.date)||"休")+" ")]):e._e(),e.isWorkdayOnWeekend(s.name,s.date)?t("span",{staticClass:"workday-badge"},[e._v(" 班 ")]):e._e(),e.isToday(s.date)?t("span",{staticClass:"today-badge"},[e._v(" 今 ")]):e._e()]),t("div",{staticClass:"day-date"},[e._v(e._s(s.date))])])]),t("div",{staticClass:"day-hours",class:{"weekend-hours":e.isWeekend(s.name,s.date)&&!e.isWorkdayOnWeekend(s.name,s.date)}},[t("i",{staticClass:"el-icon-time"}),t("span",{staticClass:"current"},[e._v(e._s(e.getTotalHours(s.items)))]),t("span",{staticClass:"separator"},[e._v("+")]),t("span",{staticClass:"remaining"},[e._v(e._s(e.getRemainingHours(s.items,s.name,s.date)))]),t("span",{staticClass:"equals"},[e._v("=")]),t("span",{staticClass:"target"},[e._v(e._s(e.isWeekend(s.name,s.date)&&!e.isWorkdayOnWeekend(s.name,s.date)?"0":"8.0"))])]),t("div",{staticClass:"work-items",on:{click:function(t){return e.handleWorkItemsClick(s.date,t)}}},[e._l(s.items,(function(i,a){return t("div",{key:a,staticClass:"work-item",on:{click:function(t){return t.stopPropagation(),e.$emit("edit-work-item",s.date,a,i)}}},[t("div",{staticClass:"item-content"},[t("div",{staticClass:"item-title"},[e._v(e._s(i.title))]),t("div",{staticClass:"item-row"},[t("div",{staticClass:"item-hours"},[t("span",{staticClass:"hours"},[e._v(e._s(i.hours)+"小时")]),i.link?t("i",{staticClass:"el-icon-link link-icon",attrs:{title:"打开云效链接"},on:{click:function(t){return t.stopPropagation(),e.$emit("open-link",i.link)}}}):e._e()]),t("div",{staticClass:"item-actions"},[t("i",{staticClass:"el-icon-edit action-btn edit-btn",attrs:{title:"编辑"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit-work-item",s.date,a,i)}}}),t("i",{staticClass:"el-icon-delete action-btn delete-btn",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete-work-item",s.date,a)}}})])])])])})),0===s.items.length?t("div",{staticClass:"empty-placeholder"},[t("i",{staticClass:"el-icon-plus"}),t("span",[e._v("点击添加工时事项")])]):e._e()],2)])})),0)},Q=[],Z={name:"WeekGrid",props:{weekDays:{type:Array,default:()=>[]},isToday:{type:Function,required:!0},isWeekend:{type:Function,required:!0},isWorkdayOnWeekend:{type:Function,required:!0},getHolidayName:{type:Function,required:!0},getTotalHours:{type:Function,required:!0},getRemainingHours:{type:Function,required:!0}},emits:["add-work-item","edit-work-item","delete-work-item","open-link"],methods:{handleWorkItemsClick(e,t){(t.target.classList.contains("work-items")||t.target.classList.contains("empty-placeholder")||t.target.closest(".empty-placeholder"))&&this.$emit("add-work-item",e)}}},X=Z,ee=(s("e05f"),Object(l["a"])(X,G,Q,!1,null,"62926aec",null)),te=ee.exports,se=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.isEditing?"编辑工时事项":"添加工时事项",visible:e.dialogVisible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"itemForm",attrs:{model:e.newItem,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"事项名称",prop:"title"}},[t("el-input",{ref:"titleInput",attrs:{placeholder:"请输入事项名称",maxlength:"50",type:"textarea",autosize:""},model:{value:e.newItem.title,callback:function(t){e.$set(e.newItem,"title",t)},expression:"newItem.title"}})],1),t("el-form-item",{attrs:{label:"工时",prop:"hours"}},[t("el-input-number",{ref:"hoursInput",attrs:{min:.1,max:24,step:1,precision:1,placeholder:"请输入工时"},model:{value:e.newItem.hours,callback:function(t){e.$set(e.newItem,"hours",t)},expression:"newItem.hours"}}),t("span",{staticClass:"unit"},[e._v("小时")]),t("div",{staticClass:"quick-options"},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$emit("set-quick-hours",2)}}},[e._v("2小时")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$emit("set-quick-hours",4)}}},[e._v("4小时")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$emit("set-quick-hours",8)}}},[e._v("8小时")])],1)],1),t("el-form-item",{attrs:{label:"云效链接"}},[t("div",{staticClass:"link-container"},[t("el-input",{attrs:{placeholder:"请输入云效任务链接（可选）",clearable:""},model:{value:e.newItem.link,callback:function(t){e.$set(e.newItem,"link",t)},expression:"newItem.link"}}),t("el-button",{attrs:{disabled:!e.newItem.link,type:"primary",size:"small"},on:{click:function(t){return e.$emit("parse-link")}}},[e._v("解析")])],1)])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("save")}}},[e._v("确定")])],1)],1)},ie=[],ae={name:"WorkItemDialog",props:{visible:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},newItem:{type:Object,default:()=>({title:"",hours:1,link:""})},rules:{type:Object,default:()=>({})}},emits:["close","save","set-quick-hours","parse-link"],computed:{dialogVisible:{get(){return this.visible},set(e){e||this.$emit("close")}}},methods:{handleClose(){this.$emit("close")}}},ne=ae,re=(s("d36f"),Object(l["a"])(ne,se,ie,!1,null,"48a3cee9",null)),oe=re.exports,le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"data-dist"},[t("div",{staticClass:"dist-header",on:{click:function(t){return e.$emit("toggle-distribution")}}},[t("div",{staticClass:"dist-title"},[t("i",{staticClass:"expand-icon",class:e.distributionExpanded?"el-icon-arrow-down":"el-icon-arrow-right"}),t("h3",[e._v("已保存的周数据分布 (共"+e._s(e.dataStats.totalWeeks)+"周)")])]),t("div",{staticClass:"dist-actions",on:{click:function(t){return t.stopPropagation(),e.$emit("clear-all-data")}}},[e._v(" 一键清理所有数据 ")])]),e.distributionExpanded?t("div",{staticClass:"dist-content"},[t("div",{staticClass:"week-grid"},e._l(e.dataStats.savedWeeks,(function(s){return t("div",{key:s,staticClass:"week-item",attrs:{title:e.getWeekTooltip(s)},on:{click:function(t){return e.$emit("go-to-week",s)}}},[t("div",{staticClass:"item-actions"},[t("i",{staticClass:"el-icon-location action-btn locate-btn",attrs:{title:"定位到此周"},on:{click:function(t){return t.stopPropagation(),e.$emit("go-to-week",s)}}}),t("i",{staticClass:"el-icon-delete action-btn delete-btn",attrs:{title:"删除此周数据"},on:{click:function(t){return t.stopPropagation(),e.$emit("delete-week",s)}}})]),t("div",{staticClass:"item-header"},[t("div",{staticClass:"week-info"},[t("div",{staticClass:"week-number"},[e._v("第"+e._s(e.getWeekNumber(s))+"周")]),t("div",{staticClass:"date-range"},[e._v(e._s(e.getWeekDateRange(s)))])])]),t("div",{staticClass:"item-stats"},[t("span",{staticClass:"hours"},[e._v(e._s(e.getWeekTotalHours(s))+"h")]),t("span",{staticClass:"separator"},[e._v("+")]),t("span",{staticClass:"remaining"},[e._v(e._s(e.getWeekRemainingHours(s))+"h")]),t("span",{staticClass:"equals"},[e._v("=")]),t("span",{staticClass:"target"},[e._v(e._s(e.getWeekTargetHours(s))+"h")])]),t("div",{staticClass:"item-days"},e._l(e.getWeekDays(s),(function(i){return t("div",{key:i.date,staticClass:"day-item",class:{"has-work":e.hasWorkOnDay(s,i.date)}},[t("span",{staticClass:"day-name"},[e._v(e._s(i.name))]),t("span",{staticClass:"day-date"},[e._v(e._s(e.formatDayDate(i.date)))]),e.hasWorkOnDay(s,i.date)?t("span",{staticClass:"work-dot"}):e._e()])})),0)])})),0)]):e._e()])},ce=[],ue={name:"DataDistribution",props:{distributionExpanded:{type:Boolean,default:!1},dataStats:{type:Object,default:()=>({totalWeeks:0,savedWeeks:[]})},currentWeekKey:{type:String,default:""},getWeekDateRange:{type:Function,required:!0},getWeekTotalHours:{type:Function,required:!0},getWeekRemainingHours:{type:Function,required:!0},getWeekTargetHours:{type:Function,required:!0},getWeekDays:{type:Function,required:!0},hasWorkOnDay:{type:Function,required:!0},formatDayDate:{type:Function,required:!0},getWeekNumber:{type:Function,required:!0}},emits:["toggle-distribution","clear-all-data","go-to-week","delete-week"],methods:{getWeekTooltip(e){const t=this.getWeekDays(e)[0],s=this.getWeekDays(e)[6],i=this.getWeekTotalHours(e),a=this.getWeekTargetHours(e);return`${t.date} ～ ${s.date}\n总工时: ${i}h / ${a}h`}}},de=ue,he=(s("d476"),Object(l["a"])(de,le,ce,!1,null,"74db85ba",null)),me=he.exports;function ke(e){if(!e)return"";const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${i}`}function pe(e){const t=new Date(e),s=t.getMonth()+1,i=t.getDate();return`${s}/${i}`}function fe(){const e=new Date,t=e.getDay(),s=new Date(e),i=0===t?6:t-1;return s.setDate(e.getDate()-i),s}function ge(e){if(!e)return!1;const t=new Date,s=t.getDay(),i=new Date(t),a=0===s?6:s-1;i.setDate(t.getDate()-a);const n=ke(i),r=ke(e);return n===r}function we(e){const t=[],s=["周一","周二","周三","周四","周五","周六","周日"];for(let i=0;i<7;i++){const a=new Date(e);a.setDate(e.getDate()+i),t.push({name:s[i],date:ke(a),items:[]})}return t}function ye(e){if(!e)return"";const t=new Date(e.getFullYear(),0,1),s=Math.floor((e-t)/864e5),i=Math.ceil((s+t.getDay()+1)/7);return i}function ve(e){if(0===e.length)return"";const t=e[0],s=e[6];return`${t.date} ～ ${s.date}`}function Ce(e){const t=new Date,s=ke(t);return e===s}const be={formatDate:ke,formatDayDate:pe,getCurrentWeekStart:fe,isCurrentWeek:ge,generateWeekDays:we,getWeekNumber:ye,getWeekRange:ve,isToday:Ce},De="workTimeSchedule";function We(){const e=localStorage.getItem(De);if(e)try{const t=JSON.parse(e);if(t.weekKey&&t.weekDays)return{[t.weekKey]:t};if("object"===typeof t)return t}catch(t){console.error("加载数据失败:",t)}return{}}function Te(e){localStorage.setItem(De,JSON.stringify(e))}function _e(e){const t=We();delete t[e],Te(t)}function xe(){localStorage.removeItem(De)}const Ne={getAllSavedData:We,saveAllData:Te,deleteWeekData:_e,clearAllData:xe};function Se(e){if(!e||0===e.length)return 0;const t=e.reduce((e,t)=>e+t.hours,0);return t.toFixed(1)}function Ie(e,t,s,i,a){const n=i(t,s)&&!a(t,s)?0:8,r=Se(e),o=Math.max(0,n-parseFloat(r));return o.toFixed(1)}function $e(e){if(0===e.length)return 0;const t=e.reduce((e,t)=>e+parseFloat(Se(t.items)),0);return t.toFixed(1)}function Le(e,t,s){if(0===e.length)return 0;const i=e.reduce((e,i)=>{const a=t(i.name,i.date),n=s(i.name,i.date);return e+(a&&!n?0:8)},0);return i}function Oe(e,t){const s=t-parseFloat(e);return Math.max(0,s).toFixed(1)}function Re(e){if(!e)return null;try{const t=e.trim(),s=t.match(/#\s*《(.+?)》/);if(s&&s[1])return s[1].trim();const i=t.match(/#\s*(.+)/);if(i&&i[1])return i[1].trim();const a=t.match(/\/task\/([A-Z]+-\d+)/);if(a&&a[1])return a[1];const n=t.split("/"),r=n[n.length-1];return r&&"task"!==r?r:null}catch(t){return console.error("解析云效链接失败:",t),null}}function Ee(e){if(!e||"string"!==typeof e)return!1;const t=e.trim();if(!t)return!1;try{const e=new URL(t),s=["yunxiao.alibaba-inc.com","yunxiao.aliyun.com","devops.aliyun.com"];return s.some(t=>e.hostname.includes(t))}catch(s){return!1}}function Me(e){const t=Ne.getAllSavedData(),s=t[e];if(!s||!s.weekDays||0===s.weekDays.length)return"";const i=s.weekDays[0],a=s.weekDays[6];return`${i.date} ～ ${a.date}`}function He(e){const t=Ne.getAllSavedData(),s=t[e];if(!s||!s.weekDays)return 0;const i=s.weekDays.reduce((e,t)=>e+(t.items?t.items.reduce((e,t)=>e+t.hours,0):0),0);return i.toFixed(1)}function Fe(e,t,s){const i=Ne.getAllSavedData(),a=i[e];if(!a||!a.weekDays)return 0;const n=a.weekDays.reduce((e,i)=>{const a=t(i.name,i.date),n=s(i.name,i.date);return e+(a&&!n?0:8)},0);return n}function Ae(e){const t=parseFloat(He(e)),s=Fe(e),i=Math.max(0,s-t);return i.toFixed(1)}function Pe(e){const t=Ne.getAllSavedData(),s=t[e];return s&&s.weekDays?s.weekDays:[]}function qe(e,t){const s=Ne.getAllSavedData(),i=s[e];if(!i||!i.weekDays)return!1;const a=i.weekDays.find(e=>e.date===t);return a&&a.items&&a.items.length>0}const Ue={getTotalHours:Se,getRemainingHours:Ie,calculateWeekTotalHours:$e,calculateWeekTargetHours:Le,calculateWeekRemainingHours:Oe,parseYunxiaoLink:Re,isValidYunxiaoLink:Ee,getWeekDateRange:Me,getWeekTotalHours:He,getWeekTargetHours:Fe,getWeekRemainingHours:Ae,getWeekDays:Pe,hasWorkOnDay:qe};var je=s("da14");function Be(e){return Object(je["b"])(e)}function Ve(e,t){return("周六"===e||"周日"===e)&&Object(je["c"])(t)}function ze(e){const t=Object(je["a"])(e);if(t&&t.name){const e=t.name.split(",");if(e.length>1)return e[1];const s=e[0];return"Saturday"===s||"Sunday"===s?null:s}return null}const Je={isWeekend:Be,isWorkdayOnWeekend:Ve,getHolidayName:ze};var Ye={name:"WorkTimeSchedule",components:{PageLayout:y,WeekNavigation:K,WeekGrid:te,WorkItemDialog:oe,DataDistribution:me},data(){return{weekDays:[],currentWeekStart:null,isCurrentWeek:!1,dialogVisible:!1,isEditing:!1,currentDay:"",currentEditIndex:-1,distributionExpanded:!1,weekReportDialogVisible:!1,weekReportContent:"",newItem:{title:"",hours:1,link:""},rules:{title:[{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],hours:[{required:!0,message:"请输入工时",trigger:"blur"}]}}},computed:{weekRange(){return be.getWeekRange(this.weekDays)},currentWeekNumber(){return be.getWeekNumber(this.currentWeekStart)},weekTotalHours(){return Ue.calculateWeekTotalHours(this.weekDays)},weekTargetHours(){return Ue.calculateWeekTargetHours(this.weekDays,this.isWeekend,this.isWorkdayOnWeekend)},weekRemainingHours(){return Ue.calculateWeekRemainingHours(this.weekTotalHours,this.weekTargetHours)}},mounted(){this.initCurrentWeek(),this.loadData()},methods:{initCurrentWeek(){this.currentWeekStart=be.getCurrentWeekStart(),this.generateWeekDays(this.currentWeekStart),this.updateIsCurrentWeek()},updateIsCurrentWeek(){this.isCurrentWeek=be.isCurrentWeek(this.currentWeekStart)},generateWeekDays(e){this.weekDays=be.generateWeekDays(e)},previousWeek(){this.navigateWeek(-7)},nextWeek(){this.navigateWeek(7)},navigateWeek(e){const t=new Date(this.currentWeekStart);t.setDate(this.currentWeekStart.getDate()+e),this.currentWeekStart=t,this.generateWeekDays(t),this.loadData(),this.updateIsCurrentWeek()},goToCurrentWeek(){this.initCurrentWeek(),this.loadData()},goToWeek(e){const t=new Date(e);this.currentWeekStart=t,this.generateWeekDays(t),this.loadData(),this.updateIsCurrentWeek()},showAddDialog(e){this.currentDay=e,this.isEditing=!1,this.currentEditIndex=-1,this.dialogVisible=!0,this.resetNewItem(),this.$nextTick(()=>{this.$refs.workItemDialog&&this.$refs.workItemDialog.$refs.itemForm&&this.$refs.workItemDialog.$refs.itemForm.clearValidate(),this.$refs.workItemDialog&&this.$refs.workItemDialog.$refs.titleInput&&this.$refs.workItemDialog.$refs.titleInput.focus()})},editWorkItem(e,t,s){this.currentDay=e,this.isEditing=!0,this.currentEditIndex=t,this.dialogVisible=!0,this.newItem={title:s.title,hours:s.hours,link:s.link||""},this.$nextTick(()=>{this.$refs.workItemDialog&&this.$refs.workItemDialog.$refs.itemForm&&this.$refs.workItemDialog.$refs.itemForm.clearValidate(),this.$refs.workItemDialog&&this.$refs.workItemDialog.$refs.hoursInput&&this.$refs.workItemDialog.$refs.hoursInput.focus()})},handleDialogClose(){this.dialogVisible=!1,this.isEditing=!1,this.currentDay="",this.currentEditIndex=-1,this.resetNewItem()},resetNewItem(){this.newItem={title:"",hours:1,link:""}},addWorkItem(){this.$refs.workItemDialog.$refs.itemForm.validate(e=>{if(e){if(Ue.isValidYunxiaoLink(this.newItem.link)||(this.newItem.link=""),this.newItem.link&&Ue.isValidYunxiaoLink(this.newItem.link))try{const e=Ue.parseYunxiaoLink(this.newItem.link);e&&(this.newItem.title.trim()||(this.newItem.title=e))}catch(t){console.warn("解析云效链接失败:",t)}if(!this.newItem.title||!this.newItem.title.trim())return void this.$message.error("保存失败，请填写事项名称");const e=this.weekDays.findIndex(e=>e.date===this.currentDay);-1!==e&&(this.$set(this.weekDays[e],"items",[...this.weekDays[e].items,{...this.newItem}]),this.saveData(),this.handleDialogClose(),this.$message.success("添加成功"))}})},updateWorkItem(){this.$refs.workItemDialog.$refs.itemForm.validate(e=>{if(e){if(Ue.isValidYunxiaoLink(this.newItem.link)||(this.newItem.link=""),this.newItem.link&&Ue.isValidYunxiaoLink(this.newItem.link))try{const e=Ue.parseYunxiaoLink(this.newItem.link);e&&(this.newItem.title.trim()||(this.newItem.title=e))}catch(t){console.warn("解析云效链接失败:",t)}if(!this.newItem.title||!this.newItem.title.trim())return void this.$message.error("保存失败，请填写事项名称");const e=this.weekDays.findIndex(e=>e.date===this.currentDay);-1!==e&&-1!==this.currentEditIndex&&(this.$set(this.weekDays[e].items,this.currentEditIndex,{...this.newItem}),this.saveData(),this.handleDialogClose(),this.$message.success("更新成功"))}})},deleteWorkItem(e,t){const s=this.weekDays.findIndex(t=>t.date===e);if(-1!==s){const e=[...this.weekDays[s].items];e.splice(t,1),this.$set(this.weekDays[s],"items",e),this.saveData(),this.$message.success("删除成功")}},setQuickHours(e){this.newItem.hours=e},openLink(e){e&&window.open(e,"_blank")},parseLink(){if(this.newItem.link)try{const e=Ue.parseYunxiaoLink(this.newItem.link);e?(this.newItem.title=e,this.$message.success("已解析链接标题："+e),this.$nextTick(()=>{this.$refs.workItemDialog&&this.$refs.workItemDialog.$refs.itemForm&&this.$refs.workItemDialog.$refs.itemForm.validateField("title")})):this.$message.warning("无法解析链接，请手动输入事项名称")}catch(e){this.$message.error("解析链接失败："+e.message)}else this.$message.warning("请先输入云效链接")},saveData(){const e=this.getWeekKey();if(!e)return;const t=Ne.getAllSavedData(),s=this.weekDays.some(e=>e.items&&e.items.length>0);s?t[e]={weekKey:e,weekDays:this.weekDays}:delete t[e],Ne.saveAllData(t)},loadData(){const e=Ne.getAllSavedData(),t=this.getWeekKey();t&&e[t]&&(this.weekDays=[...e[t].weekDays])},getWeekKey(){return be.formatDate(this.currentWeekStart)},getDataStats(){const e=Ne.getAllSavedData(),t=Object.keys(e);return{totalWeeks:t.length,savedWeeks:t.sort()}},toggleDistribution(){this.distributionExpanded=!this.distributionExpanded},deleteWeek(e){this.$confirm("确定要删除这个周的数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=Ne.getAllSavedData();delete t[e],Ne.saveAllData(t),this.$message.success("删除成功")}).catch(()=>{})},clearAllData(){this.$confirm("确定要删除所有已保存的周数据吗？此操作不可恢复！","警告",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("workTimeSchedule"),this.$message.success("所有数据已清理"),this.loadData()}).catch(()=>{})},getWeekNumber(e){const t=new Date(e);return be.getWeekNumber(t)},getWeekDateRange(e){return Ue.getWeekDateRange(e)},getWeekTotalHours(e){return Ue.getWeekTotalHours(e)},getWeekRemainingHours(e){const t=parseFloat(this.getWeekTotalHours(e)),s=this.getWeekTargetHours(e),i=Math.max(0,s-t);return i.toFixed(1)},getWeekTargetHours(e){return Ue.getWeekTargetHours(e,this.isWeekend,this.isWorkdayOnWeekend)},getWeekDays(e){return Ue.getWeekDays(e)},hasWorkOnDay(e,t){return Ue.hasWorkOnDay(e,t)},formatDayDate(e){return be.formatDayDate(e)},isToday(e){return be.isToday(e)},isWeekend(e,t){return Je.isWeekend(t)},isWorkdayOnWeekend(e,t){return Je.isWorkdayOnWeekend(e,t)},getHolidayName(e){return Je.getHolidayName(e)},getTotalHours(e){return Ue.getTotalHours(e)},getRemainingHours(e,t,s){return Ue.getRemainingHours(e,t,s,this.isWeekend,this.isWorkdayOnWeekend)},generateWeekReport(){const e=new Set;this.weekDays.forEach(t=>{t.items&&t.items.length>0&&t.items.forEach(t=>{if(t.title){let s=t.title.trim();s.endsWith("-前端")&&(s=s.slice(0,-3).trim()),s&&e.add(s)}})});const t=Array.from(e).sort();this.weekReportContent=t.map((e,t)=>`${t+1}. ${e}`).join("\n"),this.weekReportDialogVisible=!0},handleWeekReportClose(){this.weekReportDialogVisible=!1,this.weekReportContent=""},copyWeekReport(){if(!this.weekReportContent)return void this.$message.warning("周报内容为空");const e=document.createElement("textarea");e.value=this.weekReportContent,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{const t=document.execCommand("copy");t?this.$message.success("已复制到剪贴板"):navigator.clipboard.writeText(this.weekReportContent).then(()=>{this.$message.success("已复制到剪贴板")}).catch(()=>{this.$message.error("复制失败，请手动复制")})}catch(t){navigator.clipboard?navigator.clipboard.writeText(this.weekReportContent).then(()=>{this.$message.success("已复制到剪贴板")}).catch(()=>{this.$message.error("复制失败，请手动复制")}):this.$message.error("复制失败，请手动复制")}finally{document.body.removeChild(e)}}}},Ke=Ye,Ge=(s("a721"),Object(l["a"])(Ke,U,j,!1,null,"5e4663dc",null)),Qe=Ge.exports,Ze=function(){var e=this,t=e._self._c;return t("PageLayout",{attrs:{title:"数独游戏"}},[t("div",{staticClass:"sudoku-container"},[t("div",{staticClass:"sudoku-content"},[t("div",{staticClass:"control-panel"},[t("div",{staticClass:"control-main"},[t("div",{staticClass:"difficulty-selector"},[t("el-radio-group",{attrs:{size:"small"},on:{change:e.newGame},model:{value:e.difficulty,callback:function(t){e.difficulty=t},expression:"difficulty"}},[t("el-radio-button",{attrs:{label:"easy"}},[e._v("简单")]),t("el-radio-button",{attrs:{label:"medium"}},[e._v("中等")]),t("el-radio-button",{attrs:{label:"hard"}},[e._v("困难")])],1)],1),t("div",{staticClass:"game-controls"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh"},on:{click:e.newGame}},[e._v(" 新游戏 ")]),t("el-button",{attrs:{size:"small",icon:"el-icon-check"},on:{click:e.checkSolution}},[e._v(" 检查答案 ")]),t("el-button",{attrs:{size:"small",icon:"el-icon-info"},on:{click:e.giveHint}},[e._v(" 提示 ")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearAll}},[e._v(" 清空 ")])],1)]),t("div",{staticClass:"game-info"},[t("div",{staticClass:"timer"},[t("i",{staticClass:"el-icon-time"}),t("span",[e._v(e._s(e.formattedTime))])]),e.mistakes>0?t("div",{staticClass:"mistakes"},[t("i",{staticClass:"el-icon-warning"}),t("span",[e._v("错误: "+e._s(e.mistakes))])]):e._e()])]),t("div",{staticClass:"game-tips"},["won"===e.gameStatus?t("el-alert",{attrs:{title:"恭喜你！",type:"success",description:"你已经成功完成了这个数独游戏！",closable:!1,"show-icon":""}}):e.showTip?t("el-alert",{attrs:{title:e.tipMessage,type:e.tipType,closable:!0},on:{close:function(t){e.showTip=!1}}}):e._e()],1),t("div",{staticClass:"board-wrapper"},[t("div",{staticClass:"sudoku-board"},e._l(e.board,(function(s,i){return t("div",{key:i,staticClass:"sudoku-row"},e._l(s,(function(s,a){return t("div",{key:a,staticClass:"sudoku-cell",class:{initial:0!==e.initialBoard[i][a],selected:e.selectedRow===i&&e.selectedCol===a,highlighted:e.isHighlighted(i,a),error:e.hasError(i,a),"hint-cell":e.hintCell.row===i&&e.hintCell.col===a,"thick-right":(a+1)%3===0&&a<8,"thick-bottom":(i+1)%3===0&&i<8},on:{click:function(t){return e.selectCell(i,a)}}},[0!==s?t("span",[e._v(e._s(s))]):e._e()])})),0)})),0)]),t("div",{staticClass:"number-pad-toggle"},[t("el-button",{attrs:{size:"small",icon:e.showNumberPad?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(t){e.showNumberPad=!e.showNumberPad}}},[e._v(" "+e._s(e.showNumberPad?"隐藏":"显示")+"数字键盘 ")])],1),t("transition",{attrs:{name:"slide-fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showNumberPad,expression:"showNumberPad"}],staticClass:"number-pad"},[e._l(9,(function(s){return t("div",{key:s,staticClass:"number-btn",class:{disabled:!e.canPlaceNumber(s)},on:{click:function(t){return e.inputNumber(s)}}},[e._v(" "+e._s(s)+" ")])})),t("div",{staticClass:"number-btn erase-btn",on:{click:e.eraseCell}},[t("i",{staticClass:"el-icon-delete"})])],2)])],1)])])},Xe=[],et={name:"Sudoku",components:{PageLayout:y},data(){return{board:[],initialBoard:[],solution:[],selectedRow:-1,selectedCol:-1,difficulty:"medium",gameStatus:"playing",mistakes:0,timer:0,timerInterval:null,showTip:!1,tipMessage:"",tipType:"info",hintCell:{row:-1,col:-1},showNumberPad:!1}},computed:{formattedTime(){const e=Math.floor(this.timer/60),t=this.timer%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}},mounted(){this.newGame(),window.addEventListener("keydown",this.handleKeyPress)},beforeDestroy(){this.stopTimer(),window.removeEventListener("keydown",this.handleKeyPress)},methods:{newGame(){this.stopTimer(),this.solution=this.generateSudoku(),this.initialBoard=this.createPuzzle(this.solution),this.board=JSON.parse(JSON.stringify(this.initialBoard)),this.selectedRow=-1,this.selectedCol=-1,this.gameStatus="playing",this.mistakes=0,this.timer=0,this.showTip=!1,this.hintCell={row:-1,col:-1},this.startTimer()},generateSudoku(){const e=Array(9).fill(null).map(()=>Array(9).fill(0));return this.fillBoard(e),e},fillBoard(e){const t=[1,2,3,4,5,6,7,8,9];for(let s=0;s<9;s++)for(let i=0;i<9;i++)if(0===e[s][i]){this.shuffle(t);for(let a of t)if(this.isValidPlacement(e,s,i,a)){if(e[s][i]=a,this.fillBoard(e))return!0;e[s][i]=0}return!1}return!0},isValidPlacement(e,t,s,i){for(let r=0;r<9;r++)if(e[t][r]===i)return!1;for(let r=0;r<9;r++)if(e[r][s]===i)return!1;const a=3*Math.floor(t/3),n=3*Math.floor(s/3);for(let r=0;r<3;r++)for(let t=0;t<3;t++)if(e[a+r][n+t]===i)return!1;return!0},createPuzzle(e){const t=JSON.parse(JSON.stringify(e));let s;switch(this.difficulty){case"easy":s=35;break;case"medium":s=45;break;case"hard":s=55;break;default:s=45}let i=0;while(i<s){const e=Math.floor(9*Math.random()),s=Math.floor(9*Math.random());0!==t[e][s]&&(t[e][s]=0,i++)}return t},shuffle(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}},selectCell(e,t){0===this.initialBoard[e][t]&&(this.selectedRow=e,this.selectedCol=t,this.hintCell={row:-1,col:-1})},isHighlighted(e,t){if(-1===this.selectedRow||-1===this.selectedCol)return!1;const s=e===this.selectedRow,i=t===this.selectedCol,a=Math.floor(e/3)===Math.floor(this.selectedRow/3)&&Math.floor(t/3)===Math.floor(this.selectedCol/3);return s||i||a},hasError(e,t){return 0!==this.board[e][t]&&(0===this.initialBoard[e][t]&&this.board[e][t]!==this.solution[e][t])},canPlaceNumber(e){return-1!==this.selectedRow&&-1!==this.selectedCol&&0===this.initialBoard[this.selectedRow][this.selectedCol]},inputNumber(e){this.canPlaceNumber(e)&&(this.board[this.selectedRow][this.selectedCol]=e,this.hintCell={row:-1,col:-1},this.board[this.selectedRow][this.selectedCol]!==this.solution[this.selectedRow][this.selectedCol]&&this.mistakes++,this.checkWin())},eraseCell(){-1!==this.selectedRow&&-1!==this.selectedCol&&0===this.initialBoard[this.selectedRow][this.selectedCol]&&(this.board[this.selectedRow][this.selectedCol]=0,this.hintCell={row:-1,col:-1})},checkSolution(){let e=!0,t=!0;for(let s=0;s<9;s++)for(let i=0;i<9;i++)0===this.board[s][i]?t=!1:this.board[s][i]!==this.solution[s][i]&&(e=!1);t?e?(this.showMessage("完全正确！恭喜你！","success"),this.gameStatus="won",this.stopTimer()):this.showMessage("有些地方填错了，请仔细检查！","error"):this.showMessage("还有空格未填写哦！","warning")},giveHint(){for(let e=0;e<9;e++)for(let t=0;t<9;t++)if(0===this.board[e][t]||this.board[e][t]!==this.solution[e][t])return this.board[e][t]=this.solution[e][t],this.hintCell={row:e,col:t},this.showMessage(`提示：第 ${e+1} 行第 ${t+1} 列应该填 ${this.solution[e][t]}`,"info"),setTimeout(()=>{this.hintCell={row:-1,col:-1}},3e3),void this.checkWin();this.showMessage("已经全部正确了！","success")},clearAll(){this.$confirm("确定要清空所有填写的内容吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.board=JSON.parse(JSON.stringify(this.initialBoard)),this.selectedRow=-1,this.selectedCol=-1,this.hintCell={row:-1,col:-1},this.showMessage("已清空所有内容","info")}).catch(()=>{})},checkWin(){let e=!0;for(let t=0;t<9;t++){for(let s=0;s<9;s++)if(this.board[t][s]!==this.solution[t][s]){e=!1;break}if(!e)break}e&&(this.gameStatus="won",this.stopTimer(),this.showMessage("恭喜你完成了数独游戏！","success"))},showMessage(e,t){this.tipMessage=e,this.tipType=t,this.showTip=!0},startTimer(){this.timerInterval=setInterval(()=>{this.timer++},1e3)},stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},handleKeyPress(e){if(-1!==this.selectedRow&&-1!==this.selectedCol&&0===this.initialBoard[this.selectedRow][this.selectedCol])if(e.key>="1"&&e.key<="9"){e.preventDefault();const t=parseInt(e.key);this.inputNumber(t)}else"Backspace"===e.key||"Delete"===e.key||"0"===e.key?(e.preventDefault(),this.eraseCell()):"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this.moveSelection(e.key))},moveSelection(e){let t=this.selectedRow,s=this.selectedCol;const i={ArrowUp:{row:-1,col:0},ArrowDown:{row:1,col:0},ArrowLeft:{row:0,col:-1},ArrowRight:{row:0,col:1}},a=i[e];if(!a)return;let n=0;const r=9;while(n<r){if(t+=a.row,s+=a.col,t<0||t>8||s<0||s>8)return;if(0===this.initialBoard[t][s])return this.selectedRow=t,this.selectedCol=s,void(this.hintCell={row:-1,col:-1});n++}}}},tt=et,st=(s("8186"),Object(l["a"])(tt,Ze,Xe,!1,null,"a3a75cfc",null)),it=st.exports;i["default"].use(d["a"]);const at=[{path:"/",name:"Home",component:D,meta:{title:"叮咚的工具箱"}},{path:"/sql-format",name:"SqlFormat",component:S,meta:{title:"SQL格式化 - 叮咚的工具箱"}},{path:"/plate-generator",name:"PlateGenerator",component:E,meta:{title:"车牌号生成 - 叮咚的工具箱"}},{path:"/web-embed/:url/:title/:desc?",name:"WebEmbed",component:q,meta:{title:"外部网站 - 叮咚的工具箱"}},{path:"/work-time-schedule",name:"WorkTimeSchedule",component:Qe,meta:{title:"工时排布统计 - 叮咚的工具箱"}},{path:"/sudoku",name:"Sudoku",component:it,meta:{title:"数独游戏 - 叮咚的工具箱"}},{path:"*",redirect:"/"}],nt=new d["a"]({mode:"hash",base:"",routes:at});nt.beforeEach((e,t,s)=>{e.meta&&e.meta.title?document.title=e.meta.title:document.title="叮咚的工具箱",s()});var rt=nt,ot=s("5c96"),lt=s.n(ot);s("0fae");i["default"].use(lt.a),i["default"].config.productionTip=!1,new i["default"]({router:rt,render:e=>e(u)}).$mount("#app")},6229:function(e,t,s){},6415:function(e,t,s){},6941:function(e,t,s){"use strict";s("6229")},"7bc4":function(e,t,s){},"7fc8":function(e,t,s){},8186:function(e,t,s){"use strict";s("c8a1")},"89ea":function(e,t,s){"use strict";s("2ad7")},a121:function(e,t,s){},a721:function(e,t,s){"use strict";s("ea9e")},b009:function(e,t,s){},ba9d:function(e,t,s){},c8a1:function(e,t,s){},caef:function(e,t,s){},d36f:function(e,t,s){"use strict";s("7fc8")},d476:function(e,t,s){"use strict";s("fecc")},e05f:function(e,t,s){"use strict";s("6415")},ea9e:function(e,t,s){},fc7c:function(e,t,s){"use strict";s("a121")},fecc:function(e,t,s){}});
//# sourceMappingURL=app.62a3ee4c.js.map