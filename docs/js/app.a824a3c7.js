(function(t){function e(e){for(var i,r,l=e[0],o=e[1],c=e[2],d=0,h=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,l=1;l<s.length;l++){var o=s[l];0!==a[o]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"00f7":function(t,e,s){"use strict";s("caef")},"0967":function(t,e,s){"use strict";s("ba9d")},"0daa":function(t,e,s){"use strict";s("7bc4")},"0e7a":function(t,e,s){"use strict";s("b009")},"2ad7":function(t,e,s){},"398e":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],r={name:"App"},l=r,o=(s("0967"),s("2877")),c=Object(o["a"])(l,a,n,!1,null,null,null),u=c.exports,d=s("8c4f"),h=function(){var t=this,e=t._self._c;return e("PageLayout",{attrs:{title:"叮咚的工具箱",hideBackButton:!0}},[e("div",{staticClass:"home-content"},[e("div",{staticClass:"welcome-section"},[e("h2",[t._v("欢迎使用叮咚的工具箱")]),e("p",[t._v("这里提供了一些实用的开发工具，希望能帮助您提高工作效率")])]),e("div",{staticClass:"tools-grid"},t._l(t.toolList,(function(s){return e("router-link",{key:s.id,staticClass:"tool-card",attrs:{to:t.getToolLink(s)}},[e("div",{staticClass:"tool-icon"},[e("i",{class:s.icon})]),e("div",{staticClass:"tool-info"},[e("h3",{staticClass:"tool-title"},[t._v(" "+t._s(s.title)+" "),"external"===s.type?e("i",{staticClass:"el-icon-link external-indicator"}):t._e()]),e("p",{staticClass:"tool-description"},[t._v(t._s(s.description))])])])})),1),e("div",{staticClass:"footer-section"},[e("p",[t._v("Copyright © 2025 叮咚的工具箱")])])])])},m=[],p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-layout"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"page-title"},[t._v(t._s(t.title))]),t.hideBackButton?t._e():e("router-link",{staticClass:"back-button",attrs:{to:"/"}},[e("el-button",{attrs:{type:"text"}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" 返回首页 ")])],1)],1)]),e("div",{staticClass:"content",class:{"content-full-width":t.fullWidth}},[t._t("default")],2)])},f=[],k={name:"PageLayout",props:{title:{type:String,required:!0},hideBackButton:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}}},g=k,v=(s("89ea"),Object(o["a"])(g,p,f,!1,null,"318b38c5",null)),w=v.exports,y={name:"Home",components:{PageLayout:w},data(){return{toolList:[{id:1,type:"internal",route:"/sql-format",title:"SQL字段转换",description:"将SQL字段定义转换为TypeScript接口",icon:"el-icon-document-copy"},{id:2,type:"internal",route:"/plate-generator",title:"车牌号生成器",description:"快速生成车牌号图片",icon:"el-icon-truck"},{id:3,type:"internal",route:"/work-time-schedule",title:"工时排布统计",description:"记录和管理每周工时安排",icon:"el-icon-time"},{id:4,type:"external",url:"https://sunzsh.github.io/json/",title:"JSON格式化",description:"在线JSON格式化工具",icon:"el-icon-document"},{id:5,type:"external",url:"https://tool.lu",title:"在线工具集",description:"程序员在线工具集合",icon:"el-icon-folder"},{id:6,type:"external",url:"https://www.bejson.com",title:"BeJSON工具",description:"JSON在线解析及格式化验证",icon:"el-icon-edit-outline"},{id:7,type:"external",url:"https://www.json.cn",title:"JSON格式化",description:"在线JSON格式化工具",icon:"el-icon-document"}]}},methods:{getToolLink(t){if("external"===t.type){const e=encodeURIComponent(t.url),s=encodeURIComponent(t.title),i=encodeURIComponent(t.description||"");return`/web-embed/${e}/${s}/${i}`}return t.route}}},C=y,b=(s("6cba"),Object(o["a"])(C,h,m,!1,null,"52966e28",null)),_=b.exports,T=function(){var t=this,e=t._self._c;return e("PageLayout",{attrs:{title:"SQL字段转换"}},[e("el-row",{staticClass:"sql-format-content",attrs:{gutter:32}},[e("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[e("el-card",{staticClass:"input-section",attrs:{shadow:"hover"}},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"card-title"},[e("i",{staticClass:"el-icon-edit"}),t._v(" 输入SQL字段定义 ")])]),e("el-input",{staticClass:"sql-input",attrs:{type:"textarea",rows:15,placeholder:"请输入SQL字段定义...",resize:"none"},model:{value:t.sqlInput,callback:function(e){t.sqlInput=e},expression:"sqlInput"}}),e("div",{staticClass:"button-group"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.convertSql}},[t._v(" 转换 ")]),e("el-button",{attrs:{icon:"el-icon-delete"},on:{click:t.clearAll}},[t._v(" 清空 ")]),e("el-button",{attrs:{icon:"el-icon-document"},on:{click:t.loadTestData}},[t._v(" 测试数据 ")])],1)],1)],1),e("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[e("el-card",{staticClass:"output-section",attrs:{shadow:"hover"}},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"card-title"},[e("i",{staticClass:"el-icon-document"}),t._v(" 转换结果 ")])]),e("el-input",{staticClass:"sql-output",attrs:{type:"textarea",rows:15,placeholder:"转换结果将显示在这里...",readonly:"",resize:"none"},model:{value:t.showSql,callback:function(e){t.showSql=e},expression:"showSql"}}),e("div",{staticClass:"button-group"},[e("el-button",{attrs:{type:"success",icon:"el-icon-document-copy"},on:{click:t.copyResult}},[t._v(" 复制结果 ")])],1)],1)],1)],1)],1)},D=[],L={name:"SqlFormat",components:{PageLayout:w},data(){return{sqlInput:"",showSql:""}},methods:{convertSql(){if(this.sqlInput.trim())try{const t=this.parseSqlFields(this.sqlInput);this.showSql=t.join("\n"),this.$message.success("转换完成！")}catch(t){this.$message.error("转换失败，请检查输入格式"),console.error("转换错误:",t)}else this.$message.warning("请输入SQL字段定义")},parseSqlFields(t){const e=t.trim(),s=this.splitFieldDefinitions(e);return s.filter(t=>t.trim()).map(t=>this.parseSingleField(t)).filter(t=>t)},splitFieldDefinitions(t){const e=t.replace(/,\s*$/,""),s=[];let i="",a=!1,n="";for(let r=0;r<e.length;r++){const t=e[r];"'"!==t&&'"'!==t||0!==r&&"\\"===e[r-1]||(a?t===n&&(a=!1):(a=!0,n=t)),","!==t||a?i+=t:(s.push(i.trim()),i="")}return i.trim()&&s.push(i.trim()),s},parseSingleField(t){try{const e=t.match(/`([^`]+)`/);if(!e)return console.warn("无法解析字段名:",t),null;const s=e[1],i=this.strToCam(s),a=t.match(/`\s*(\w+)/i),n=a?a[1].toLowerCase():"",r=["bigint","int","tinyint","smallint","mediumint","decimal","float","double"],l=r.includes(n)?"number":"string",o=t.includes("NOT NULL"),c=t.match(/DEFAULT\s+['"`]?([^'"`,\s]+)['"`]?/i),u=c?c[1]:null,d=t.match(/COMMENT\s+['"`]([^'"`]+)['"`]/i),h=d?d[1]:"",m=[];h&&m.push(h),o&&m.push("【必填】"),null!==u&&m.push(`【默认为：${u}】`);const p=m.length>0?"  // "+m.join(" "):"",f=o?"":"?";return`${i}${f}: ${l};${p}`}catch(e){return console.warn("解析字段失败:",t,e),null}},strToCam(t){return t&&"string"===typeof t?t.toLowerCase().split("_").map((t,e)=>0===e?t:t.charAt(0).toUpperCase()+t.slice(1)).join(""):""},copyResult(){this.showSql.trim()?navigator.clipboard.writeText(this.showSql).then(()=>{this.$message.success("复制成功！")}).catch(()=>{const t=document.createElement("textarea");t.value=this.showSql,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$message.success("复制成功！")}):this.$message.warning("没有可复制的内容")},clearAll(){this.sqlInput="",this.showSql=""},loadTestData(){this.sqlInput="\n        `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',\n        `company_id` bigint(20) NOT NULL COMMENT '客户公司编码',\n        `bill_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '单据号',\n        `contract_status` tinyint(4) NOT NULL DEFAULT '10' COMMENT '合同状态(10=正常 20=已过期 30=提前中止)',\n        `display_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '显示品牌/品类控制字段(0=品牌 1=品类)',\n        `supplier_no` varchar(20) NOT NULL COMMENT '供应商编号',\n        `stock_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '库存数量',\n        `before_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '调整前数量',\n        `adjustment_qty` decimal(12,3) NOT NULL DEFAULT '0.000' COMMENT '调整数量',\n        `settlement_method` tinyint(4) NOT NULL COMMENT '结算方式 1=半月结 2=月结 3=季结 ',\n        `currency` tinyint(4) NOT NULL COMMENT '币种(1=人民币 2=港币 3=美元)',\n        `effective_date` date NOT NULL COMMENT '生效日期',\n        `status` varchar(20) NOT NULL DEFAULT '10' COMMENT '状态(10=正常 20=审核)',\n        `remarks` varchar(100) DEFAULT NULL COMMENT '备注',\n        `creator` varchar(20) NOT NULL COMMENT '创建人',\n        `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间(不可人为调整)',\n        `modifier` varchar(20) DEFAULT NULL COMMENT '修改人',\n        `modify_time` datetime DEFAULT NULL COMMENT '修改时间',\n        `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n        `del_tag` varchar(2) DEFAULT '0' COMMENT '归档删除标识(0=正常归档，删除后数据同步下游 1=归档删除，删除后数据不同步下游',\n        `partion_no` varchar(20) NOT NULL COMMENT '分库特征码',\n      ",this.showSql=""}}},S=L,N=(s("0daa"),Object(o["a"])(S,T,D,!1,null,"257fd45f",null)),x=N.exports,O=function(){var t=this,e=t._self._c;return e("PageLayout",{attrs:{title:"车牌号图片生成器"}},[e("div",{staticClass:"plate-generator-content"},[e("el-card",{staticClass:"input-section",attrs:{shadow:"hover"}},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("i",{staticClass:"el-icon-edit"}),e("span",[t._v("输入车牌号")])]),e("el-form",{attrs:{model:t.formData,"label-width":"100px",size:"medium"}},[e("el-form-item",{attrs:{label:"车牌号码"}},[e("el-input",{attrs:{placeholder:"请输入车牌号，如：京A12345",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.generatePlate.apply(null,arguments)}},model:{value:t.plateNumber,callback:function(e){t.plateNumber=e},expression:"plateNumber"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-picture",disabled:!t.plateNumber.trim()},on:{click:t.generatePlate}},[t._v(" 生成图片 ")])],1)],1)],1),e("el-card",{staticClass:"preview-section",attrs:{shadow:"hover"}},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("i",{staticClass:"el-icon-view"}),e("span",[t._v("车牌预览")])]),e("div",{staticClass:"canvas-container"},[e("canvas",{ref:"plateCanvas",attrs:{width:"320",height:"80"}}),e("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-download",disabled:!t.plateNumber.trim()},on:{click:t.downloadPlate}},[t._v(" 下载PNG图片 ")])],1)])],1)])},W=[],I={name:"PlateGenerator",components:{PageLayout:w},data(){return{plateNumber:"京A12345",formData:{plateNumber:""}}},mounted(){this.generatePlate()},methods:{generatePlate(){const t=this.$refs.plateCanvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.fillStyle="#1976d2",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#fff",e.lineWidth=2;const s=10,i=5,a=i,n=i,r=t.width-2*i,l=t.height-2*i;e.beginPath(),e.moveTo(a+s,n),e.lineTo(a+r-s,n),e.quadraticCurveTo(a+r,n,a+r,n+s),e.lineTo(a+r,n+l-s),e.quadraticCurveTo(a+r,n+l,a+r-s,n+l),e.lineTo(a+s,n+l),e.quadraticCurveTo(a,n+l,a,n+l-s),e.lineTo(a,n+s),e.quadraticCurveTo(a,n,a+s,n),e.closePath(),e.stroke(),e.beginPath(),e.arc(120,t.height/2,4,0,2*Math.PI),e.fillStyle="#fff",e.fill(),e.textAlign="left",e.textBaseline="middle";const o=this.plateNumber||"京A12345",c=o.slice(0,1),u=o.slice(1,2),d=o.slice(2);e.font='bold 36px "Arial Narrow", "Microsoft YaHei", "黑体", Arial, sans-serif',e.fillStyle="#000000",e.fillText(c,21.5,t.height/2+4+1.5),e.fillStyle="#E0E0E0",e.fillText(c,19.5,t.height/2+4-.5),e.fillStyle="#fff",e.fillText(c,20,t.height/2+4),e.font='bold 40px "Arial Narrow", "Microsoft YaHei", "黑体", Arial, sans-serif',e.fillStyle="#000000",e.fillText(u,66.5,t.height/2+4+1.5),e.fillStyle="#E0E0E0",e.fillText(u,64.5,t.height/2+4-.5),e.fillStyle="#fff",e.fillText(u,65,t.height/2+4);let h=140,m=30;(5===d.length||6===d.length)&&(m=30);for(let p=0;p<d.length;p++)e.fillStyle="#000000",e.fillText(d[p],h+1.5,t.height/2+4+1.5),e.fillStyle="#E0E0E0",e.fillText(d[p],h-.5,t.height/2+4-.5),e.fillStyle="#fff",e.fillText(d[p],h,t.height/2+4),h+=m},downloadPlate(){const t=this.$refs.plateCanvas,e=document.createElement("a");e.download=`车牌号_${this.plateNumber||"京A88888"}.png`,e.href=t.toDataURL(),e.click()}},watch:{plateNumber(){this.$nextTick(()=>{this.generatePlate()})}}},E=I,$=(s("00f7"),Object(o["a"])(E,O,W,!1,null,"3566b994",null)),M=$.exports,F=function(){var t=this,e=t._self._c;return e("PageLayout",{attrs:{title:t.pageTitle,showBackButton:!0}},[e("div",{staticClass:"web-embed-container"},[e("div",{staticClass:"embed-header"},[e("div",{staticClass:"header-content"},[e("h2",[t._v(t._s(t.pageTitle))]),t.description?e("p",[t._v(t._s(t.description))]):t._e()]),e("div",{staticClass:"header-actions"},[e("a",{staticClass:"external-link",attrs:{href:t.url,target:"_blank"}},[e("i",{staticClass:"el-icon-link"}),t._v(" 在新窗口中打开 ")]),e("a",{staticClass:"external-link",on:{click:t.openFullscreen}},[e("i",{staticClass:"el-icon-full-screen"}),t._v(" 放大网页 ")])])]),e("div",{staticClass:"iframe-container",class:{"fullscreen-mode":t.showFullscreen}},[e("iframe",{staticClass:"embedded-iframe",class:{"fullscreen-iframe":t.showFullscreen},attrs:{src:t.url,title:t.pageTitle,frameborder:"0",allowfullscreen:""}}),t.showFullscreen?e("button",{staticClass:"floating-close-btn",on:{click:t.closeFullscreen}},[e("i",{staticClass:"el-icon-close"})]):t._e()])])])},U=[],A={name:"WebEmbed",components:{PageLayout:w},data(){return{url:"",pageTitle:"",description:"",showFullscreen:!1}},created(){const{url:t,title:e,desc:s}=this.$route.params;this.url=decodeURIComponent(t||""),this.pageTitle=decodeURIComponent(e||"外部网站"),this.description=decodeURIComponent(s||"")},mounted(){if(!this.url||!this.isValidUrl(this.url))return this.$message.error("无效的URL地址"),void this.$router.push("/")},beforeDestroy(){document.body.classList.remove("fullscreen-active"),document.documentElement.classList.remove("fullscreen-active")},methods:{isValidUrl(t){try{return new URL(t),!0}catch(e){return!1}},openFullscreen(){this.showFullscreen=!0,document.body.classList.add("fullscreen-active"),document.documentElement.classList.add("fullscreen-active")},closeFullscreen(){this.showFullscreen=!1,requestAnimationFrame(()=>{document.body.classList.remove("fullscreen-active"),document.documentElement.classList.remove("fullscreen-active")})}}},q=A,P=(s("0e7a"),Object(o["a"])(q,F,U,!1,null,"8d844f9a",null)),j=P.exports,R=function(){var t=this,e=t._self._c;return e("PageLayout",{attrs:{title:"工时排布统计",fullWidth:!0}},[e("div",{staticClass:"work-time-content"},[e("div",{staticClass:"week-navigation"},[e("div",{staticClass:"nav-button-container"},[e("el-button",{attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:t.previousWeek}},[t._v("上一周")])],1),e("div",{staticClass:"week-display"},[e("div",{staticClass:"week-title-container",on:{click:t.goToCurrentWeek}},[e("span",{staticClass:"week-title"},[t._v("第"+t._s(t.currentWeekNumber)+"周")]),t.isCurrentWeek?t._e():e("i",{staticClass:"el-icon-refresh current-week-icon",attrs:{title:"回到本周"}})]),e("div",{staticClass:"week-stats"},[e("span",{staticClass:"week-date-range"},[t._v(t._s(t.weekRange))]),e("div",{staticClass:"week-hours-summary"},[e("span",{staticClass:"week-total"},[t._v(t._s(t.weekTotalHours)+"h")]),e("span",{staticClass:"week-separator"},[t._v("/")]),e("span",{staticClass:"week-target"},[t._v(t._s(t.weekTargetHours)+"h")]),parseFloat(t.weekRemainingHours)>0?e("span",{staticClass:"week-remaining"},[t._v("(还差"+t._s(t.weekRemainingHours)+"h)")]):t._e()]),e("div",{staticClass:"data-stats",attrs:{title:"已保存的数据周数"}},[e("i",{staticClass:"el-icon-folder"}),e("span",[t._v(t._s(t.getDataStats().totalWeeks)+"周")])])])]),e("div",{staticClass:"nav-button-container"},[e("el-button",{attrs:{type:"text",icon:"el-icon-arrow-right"},on:{click:t.nextWeek}},[t._v("下一周")])],1)]),e("div",{staticClass:"week-grid"},t._l(t.weekDays,(function(s){return e("div",{key:s.date,staticClass:"day-column"},[e("div",{staticClass:"day-header",class:{today:t.isToday(s.date),weekend:t.isWeekend(s.name,s.date),"workday-weekend":t.isWorkdayOnWeekend(s.name,s.date)}},[e("div",{staticClass:"day-header-top"},[e("div",{staticClass:"day-name"},[t._v(" "+t._s(s.name)+" "),t.isWeekend(s.name,s.date)?e("span",{staticClass:"weekend-badge"},[t._v(" "+t._s(t.getHolidayName(s.date)||"休")+" ")]):t._e(),t.isWorkdayOnWeekend(s.name,s.date)?e("span",{staticClass:"workday-weekend-badge"},[t._v(" 班 ")]):t._e(),t.isToday(s.date)?e("span",{staticClass:"today-weekend-badge"},[t._v(" 今 ")]):t._e()]),e("div",{staticClass:"day-date"},[t._v(t._s(s.date))])])]),e("div",{staticClass:"day-hours",class:{"weekend-hours":t.isWeekend(s.name,s.date)&&!t.isWorkdayOnWeekend(s.name,s.date)}},[e("i",{staticClass:"el-icon-time"}),e("span",{staticClass:"current-hours"},[t._v(t._s(t.getTotalHours(s.items)))]),e("span",{staticClass:"hours-separator"},[t._v("+")]),e("span",{staticClass:"remaining-hours"},[t._v(t._s(t.getRemainingHours(s.items,s.name,s.date)))]),e("span",{staticClass:"hours-equals"},[t._v("=")]),e("span",{staticClass:"target-hours"},[t._v(t._s(t.isWeekend(s.name,s.date)&&!t.isWorkdayOnWeekend(s.name,s.date)?"0":"8.0"))])]),e("div",{staticClass:"work-items",on:{click:function(e){return t.handleWorkItemsClick(s.date,e)}}},[t._l(s.items,(function(i,a){return e("div",{key:a,staticClass:"work-item",on:{click:function(e){return e.stopPropagation(),t.editWorkItem(s.date,a,i)}}},[e("div",{staticClass:"item-content"},[e("div",{staticClass:"item-title"},[t._v(t._s(i.title))]),e("div",{staticClass:"item-hours-row"},[e("div",{staticClass:"item-hours-section"},[e("span",{staticClass:"item-hours"},[t._v(t._s(i.hours)+"小时")]),i.link?e("i",{staticClass:"el-icon-link link-icon",attrs:{title:"打开云效链接"},on:{click:function(e){return e.stopPropagation(),t.openLink(i.link)}}}):t._e()]),e("div",{staticClass:"item-actions"},[e("i",{staticClass:"el-icon-edit action-icon edit-icon",attrs:{title:"编辑"},on:{click:function(e){return e.stopPropagation(),t.editWorkItem(s.date,a,i)}}}),e("i",{staticClass:"el-icon-delete action-icon delete-icon",attrs:{title:"删除"},on:{click:function(e){return e.stopPropagation(),t.deleteWorkItem(s.date,a)}}})])])])])})),0===s.items.length?e("div",{staticClass:"empty-placeholder"},[e("i",{staticClass:"el-icon-plus"}),e("span",[t._v("点击添加工时事项")])]):t._e()],2)])})),0),e("el-dialog",{attrs:{title:t.isEditing?"编辑工时事项":"添加工时事项",visible:t.dialogVisible,width:"600px","before-close":t.handleDialogClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"itemForm",attrs:{model:t.newItem,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"事项名称",prop:"title"}},[e("el-input",{ref:"titleInput",attrs:{placeholder:"请输入事项名称",maxlength:"50",type:"textarea",autosize:""},model:{value:t.newItem.title,callback:function(e){t.$set(t.newItem,"title",e)},expression:"newItem.title"}})],1),e("el-form-item",{attrs:{label:"工时",prop:"hours"}},[e("el-input-number",{ref:"hoursInput",attrs:{min:.1,max:24,step:1,precision:1,placeholder:"请输入工时"},model:{value:t.newItem.hours,callback:function(e){t.$set(t.newItem,"hours",e)},expression:"newItem.hours"}}),e("span",{staticClass:"hours-unit"},[t._v("小时")]),e("div",{staticClass:"quick-hours-options"},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.setQuickHours(2)}}},[t._v("2小时")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.setQuickHours(4)}}},[t._v("4小时")]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.setQuickHours(8)}}},[t._v("8小时")])],1)],1),e("el-form-item",{attrs:{label:"云效链接"}},[e("div",{staticClass:"link-input-container"},[e("el-input",{attrs:{placeholder:"请输入云效任务链接（可选）",clearable:""},model:{value:t.newItem.link,callback:function(e){t.$set(t.newItem,"link",e)},expression:"newItem.link"}}),e("el-button",{attrs:{disabled:!t.newItem.link,type:"primary",size:"small"},on:{click:t.parseLink}},[t._v("解析")])],1)])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleDialogClose}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isEditing?t.updateWorkItem():t.addWorkItem()}}},[t._v("确定")])],1)],1)],1)])},H=[],B=s("da14"),z={name:"WorkTimeSchedule",components:{PageLayout:w},data(){return{weekDays:[],currentWeekStart:null,isCurrentWeek:!1,dialogVisible:!1,isEditing:!1,currentDay:"",currentEditIndex:-1,newItem:{title:"",hours:1,link:""},rules:{title:[{required:!0,message:"请输入事项名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],hours:[{required:!0,message:"请输入工时",trigger:"blur"}]}}},computed:{weekRange(){if(0===this.weekDays.length)return"";const t=this.weekDays[0],e=this.weekDays[6];return`${t.date} ～ ${e.date}`},currentWeekNumber(){if(!this.currentWeekStart)return"";const t=new Date(this.currentWeekStart.getFullYear(),0,1),e=Math.floor((this.currentWeekStart-t)/864e5),s=Math.ceil((e+t.getDay()+1)/7);return s},weekTotalHours(){if(0===this.weekDays.length)return 0;const t=this.weekDays.reduce((t,e)=>t+parseFloat(this.getTotalHours(e.items)),0);return t.toFixed(1)},weekTargetHours(){if(0===this.weekDays.length)return 0;const t=this.weekDays.reduce((t,e)=>{const s=this.isWeekend(e.name,e.date),i=this.isWorkdayOnWeekend(e.name,e.date);return t+(s&&!i?0:8)},0);return t},weekRemainingHours(){const t=this.weekTargetHours-parseFloat(this.weekTotalHours);return Math.max(0,t).toFixed(1)}},mounted(){this.initCurrentWeek(),this.loadData(),this.cleanOldData()},methods:{initCurrentWeek(){const t=new Date,e=t.getDay(),s=new Date(t),i=0===e?6:e-1;s.setDate(t.getDate()-i),this.currentWeekStart=s,this.generateWeekDays(s),this.updateIsCurrentWeek()},updateIsCurrentWeek(){if(!this.currentWeekStart)return void(this.isCurrentWeek=!1);const t=new Date,e=t.getDay(),s=new Date(t),i=0===e?6:e-1;s.setDate(t.getDate()-i);const a=this.formatDate(s),n=this.formatDate(this.currentWeekStart);this.isCurrentWeek=a===n},generateWeekDays(t){const e=[],s=["周一","周二","周三","周四","周五","周六","周日"];for(let i=0;i<7;i++){const a=new Date(t);a.setDate(t.getDate()+i),e.push({name:s[i],date:this.formatDate(a),items:[]})}this.weekDays=e},formatDate(t){const e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${i}`},showAddDialog(t){this.currentDay=t,this.isEditing=!1,this.currentEditIndex=-1,this.dialogVisible=!0,this.newItem={title:"",hours:1,link:""},this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.clearValidate(),this.$refs.titleInput&&this.$refs.titleInput.focus()})},editWorkItem(t,e,s){this.currentDay=t,this.isEditing=!0,this.currentEditIndex=e,this.dialogVisible=!0,this.newItem={title:s.title,hours:s.hours,link:s.link||""},this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.clearValidate(),this.$refs.hoursInput&&this.$refs.hoursInput.focus()})},handleDialogClose(){this.dialogVisible=!1,this.isEditing=!1,this.currentDay="",this.currentEditIndex=-1,this.newItem={title:"",hours:1,link:""}},addWorkItem(){this.$refs.itemForm.validate(t=>{if(t){const t=this.weekDays.findIndex(t=>t.date===this.currentDay);-1!==t&&(this.weekDays[t].items.push({title:this.newItem.title,hours:this.newItem.hours,link:this.newItem.link}),this.saveData(),this.handleDialogClose(),this.$message.success("添加成功"))}})},updateWorkItem(){this.$refs.itemForm.validate(t=>{if(t){const t=this.weekDays.findIndex(t=>t.date===this.currentDay);-1!==t&&-1!==this.currentEditIndex&&(this.weekDays[t].items[this.currentEditIndex]={title:this.newItem.title,hours:this.newItem.hours,link:this.newItem.link},this.saveData(),this.handleDialogClose(),this.$message.success("更新成功"))}})},deleteWorkItem(t,e){const s=this.weekDays.findIndex(e=>e.date===t);-1!==s&&(this.weekDays[s].items.splice(e,1),this.saveData(),this.$message.success("删除成功"))},saveData(){const t=this.getWeekKey();if(!t)return;const e=this.getAllSavedData();e[t]={weekKey:t,weekDays:this.weekDays},localStorage.setItem("workTimeSchedule",JSON.stringify(e)),this.cleanOldData()},loadData(){const t=this.getAllSavedData(),e=this.getWeekKey();e&&t[e]&&(this.weekDays=t[e].weekDays)},getAllSavedData(){const t=localStorage.getItem("workTimeSchedule");if(t)try{const e=JSON.parse(t);if(e.weekKey&&e.weekDays)return{[e.weekKey]:e};if("object"===typeof e)return e}catch(e){console.error("加载数据失败:",e)}return{}},getWeekKey(){return this.currentWeekStart?this.formatDate(this.currentWeekStart):""},cleanOldData(){const t=this.getAllSavedData(),e=Object.keys(t).sort();if(e.length>12){const s=e.slice(0,e.length-12);s.forEach(e=>{delete t[e]}),localStorage.setItem("workTimeSchedule",JSON.stringify(t)),console.log(`已清理 ${s.length} 周的旧数据`)}},getDataStats(){const t=this.getAllSavedData(),e=Object.keys(t);return{totalWeeks:e.length,savedWeeks:e.sort()}},previousWeek(){const t=new Date(this.currentWeekStart);t.setDate(this.currentWeekStart.getDate()-7),this.currentWeekStart=t,this.generateWeekDays(t),this.loadData(),this.updateIsCurrentWeek()},nextWeek(){const t=new Date(this.currentWeekStart);t.setDate(this.currentWeekStart.getDate()+7),this.currentWeekStart=t,this.generateWeekDays(t),this.loadData(),this.updateIsCurrentWeek()},goToCurrentWeek(){this.initCurrentWeek(),this.loadData()},isWeekend(t,e){return Object(B["b"])(e)},isWorkdayOnWeekend(t,e){return("周六"===t||"周日"===t)&&Object(B["c"])(e)},getHolidayName(t){const e=Object(B["a"])(t);if(e&&e.name){const t=e.name.split(",");if(t.length>1)return t[1];const s=t[0];return"Saturday"===s||"Sunday"===s?null:s}return null},isToday(t){const e=new Date,s=this.formatDate(e);return t===s},getTotalHours(t){if(!t||0===t.length)return 0;const e=t.reduce((t,e)=>t+e.hours,0);return e.toFixed(1)},getRemainingHours(t,e,s){const i=this.isWeekend(e,s)&&!this.isWorkdayOnWeekend(e,s)?0:8,a=this.getTotalHours(t),n=Math.max(0,i-parseFloat(a));return n.toFixed(1)},handleWorkItemsClick(t,e){(e.target.classList.contains("work-items")||e.target.classList.contains("empty-placeholder")||e.target.closest(".empty-placeholder"))&&this.showAddDialog(t)},setQuickHours(t){this.newItem.hours=t},openLink(t){t&&window.open(t,"_blank")},parseLink(){if(this.newItem.link)try{const t=this.newItem.link.trim(),e=t.match(/#\s*《(.+?)》/);if(e&&e[1])return this.newItem.title=e[1].trim(),this.$message.success("已解析链接标题："+this.newItem.title),void this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.validateField("title")});const s=t.match(/#\s*(.+)/);if(s&&s[1])return this.newItem.title=s[1].trim(),this.$message.success("已解析链接标题："+this.newItem.title),void this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.validateField("title")});const i=t.match(/\/task\/([A-Z]+-\d+)/);if(i&&i[1])return this.newItem.title=i[1],this.$message.success("已解析任务编号："+this.newItem.title),void this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.validateField("title")});const a=t.split("/"),n=a[a.length-1];if(n&&"task"!==n)return this.newItem.title=n,this.$message.warning("未找到标准格式标题，已使用链接末尾作为事项名称"),void this.$nextTick(()=>{this.$refs.itemForm&&this.$refs.itemForm.validateField("title")});this.$message.warning("无法解析链接，请手动输入事项名称")}catch(t){this.$message.error("解析链接失败："+t.message)}else this.$message.warning("请先输入云效链接")}}},J=z,Q=(s("6b6f"),Object(o["a"])(J,R,H,!1,null,"4a77b616",null)),V=Q.exports;i["default"].use(d["a"]);const K=[{path:"/",name:"Home",component:_,meta:{title:"叮咚的工具箱"}},{path:"/sql-format",name:"SqlFormat",component:x,meta:{title:"SQL格式化 - 叮咚的工具箱"}},{path:"/plate-generator",name:"PlateGenerator",component:M,meta:{title:"车牌号生成 - 叮咚的工具箱"}},{path:"/web-embed/:url/:title/:desc?",name:"WebEmbed",component:j,meta:{title:"外部网站 - 叮咚的工具箱"}},{path:"/work-time-schedule",name:"WorkTimeSchedule",component:V,meta:{title:"工时排布统计 - 叮咚的工具箱"}},{path:"*",redirect:"/"}],Y=new d["a"]({mode:"hash",base:"",routes:K});Y.beforeEach((t,e,s)=>{t.meta&&t.meta.title?document.title=t.meta.title:document.title="叮咚的工具箱",s()});var G=Y,Z=s("5c96"),X=s.n(Z);s("0fae");i["default"].use(X.a),i["default"].config.productionTip=!1,new i["default"]({router:G,render:t=>t(u)}).$mount("#app")},"6b6f":function(t,e,s){"use strict";s("398e")},"6cba":function(t,e,s){"use strict";s("8fb4")},"7bc4":function(t,e,s){},"89ea":function(t,e,s){"use strict";s("2ad7")},"8fb4":function(t,e,s){},b009:function(t,e,s){},ba9d:function(t,e,s){},caef:function(t,e,s){}});
//# sourceMappingURL=app.a824a3c7.js.map